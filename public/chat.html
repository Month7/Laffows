<!DOCTYPE html>
<html>
<head>
<title>学习板块</title>
<script src="../src/js/jquery.min.js"></script>
<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="../src/css/bootstrap.min.css">
<link href="../src/css/style.css" rel="stylesheet" type="text/css" media="all" />	
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <!--顶部导航-->
    <div class="header">
            <div class="container">
                <a class="logo" href="index.html">
                    Laffows++
                </a>
                <a href="home.html">个人中心</a>
                <a id="nav-study" href="#">学习</a>
                <div class="nav-study-children">
                    <a href="classroom.html">空教室查询</a>
                    <a href="selfStudy.html">约自习</a>
                </div>
                <a id="nav-friends" href="#" class="selected">交友</a>
                <div id="nav-friends-children">
                    <a href="chat.html">下课聊</a>
                    <a href="love.html">表白墙</a>
                </div>
                <a href="https://www.nowcoder.com/">求职</a>
                <div class="pull-right">
                    <a href="home.html">
                        <img src="../images/head.jpg" alt="个人头像"/>
                        Month
                    </a>
                </div>
                <div style="clear:both"></div>
            </div>
        </div>
    <!--主体内容-->
    <div class="container container_bg" >
            <div class="row">
                <div class="col-sm-2"></div>
    
                <div class="col-sm-6 col-xs-12 my_edit" >
                    <div class="row" id="edit_form" >
                        <span class="pull-left" style="margin:15px;">Shall we go to study together?</span>
                        <span class="tips pull-right" style="margin:15px;"></span>
                        <form role="form" style="margin-top: 50px;">
                              <div class="form-group">
                                   <div class="col-sm-12">
                            
                                           <div contentEditable="true" id="content" class="form-control " ></div>  
                                    </div>
                                    <div class="col-sm-12" style="margin-top: 12px;">
                                        <span class="emoji">表情</span>
    
                                        <span class="pic" >图片</span>
                                        <span>
                                            <input type="file" name=""  class="select_Img" style="display: none" >
                                            <img class="preview" src="">
                                        </span>
                                        
    
                                        <div class="myEmoji" >
                                            <ul id="myTab" class="nav nav-tabs">
                                                <li class="active">
                                                    <a href="#set" data-toggle="tab">
                                                       预设
                                                    </a>
                                                </li>
                                                <li><a href="#hot" data-toggle="tab">热门</a></li>
                                                
                                            </ul>
                                            <div id="myTabContent" class="tab-content">
                                                <div class="tab-pane fade in active" id="set">
                                                    <div class="emoji_1"></div>
    
                                                </div>
                                                <div class="tab-pane fade" id="hot">
                                                  <div class="emoji_2"></div>
                                                </div>
                                               
                                            </div>
                                        </div>
                                        <!-- <span> <input type="file" id="selectImg" value=""></input> </span> -->
                                        <button type="button" id="send" class="btn btn-default pull-right disabled">发布</button>
                                    </div>
                              </div>
                        </form> 
                       </div>
                    
    
                       <div class="row item_msg" >
                           <div class="col-sm-12 col-xs-12 message" >
                                <img src="../images/head.jpg" class="col-sm-2 col-xs-2" style="border-radius: 50%">
                                <div class="col-sm-10 col-xs-10">
                                   <span style="font-weight: bold;">Month</span>
                                   <br>
                                    <small class="date" style="color:#999">1分钟前</small>
                                   <div class="msg_content">今天天气真好
                                    <img class="mypic" src="../images/bg_1.jpg" />
                                    </div>
                                </div>	
                           </div>  
                       </div>
                       <div class="row item_msg" >
                            <div class="col-sm-12 col-xs-12 message" >
                                 <img src="../images/head.jpg" class="col-sm-2 col-xs-2" style="border-radius: 50%">
                                 <div class="col-sm-10 col-xs-10">
                                    <span style="font-weight: bold;">Month</span>
                                    <br>
                                     <small class="date" style="color:#999">1分钟前</small>
                                    <div class="msg_content">今天天气真好
                                     <img class="mypic" src="../images/bg_1.jpg" />
                                     </div>
                                 </div>	
                            </div>  
                        </div>
                        <div class="row item_msg" >
                           <div class="col-sm-12 col-xs-12 message" >
                                <img src="../images/head.jpg" class="col-sm-2 col-xs-2" style="border-radius: 50%">
                                <div class="col-sm-10 col-xs-10">
                                   <span style="font-weight: bold;">Month</span>
                                   <br>
                                    <small class="date" style="color:#999">1分钟前</small>
                                   <div class="msg_content">今天天气真好
                                    <img class="mypic" src="../images/bg_1.jpg" />
                                    </div>
                                </div>	
                           </div>  
                       </div>
                </div>
    
    
                <div class="col-sm-3 col-xs-12 part_right" >
                    <div class="row text-center inform">
                        <img src="../images/head.jpg" >
                        <h4 style="font-weight: bold;">Month</h4>
                        <div class="col-sm-12 my_inform" >
                            <div class="col-sm-4 col-xs-4">
                                <div>23</div>
                                <div class="sort">关注</div>
    
                            </div>
                            <div class="col-sm-4 col-xs-4">
                                <div>111</div>
                                <div class="sort">粉丝</div>
                            </div>
                            <div class="col-sm-4 col-xs-4">
                                <div>79</div>
                                <div class="sort">动态</div>
                            </div>
                        </div>
                    </div>  
                    <!-- <div class="row part_hot" >
                        <div class="col-sm-12">
                            <span class="pull-left" style="padding: 10px;font-size:16px;font-weight: bold;">一起去自习</span>
                            <span class="pull-right" style="padding: 10px;">换话题</span>
                        </div>
                        <hr style="margin: 0;padding: 0;width: 100%">
    
                        <div class="col-sm-12 item_hot" >
                            <span class="pull-left">#学java#</span>
                            <span class="pull-right item_num">34.6亿</span>
                        </div>
    
                        <div class="col-sm-12 item_hot" >
                            <span class="pull-left">#高数求助#</span>
                            <span class="pull-right item_num">2.6亿</span>
                        </div>
    
                        <div class="col-sm-12 item_hot" >
                            <span class="pull-left">#竞赛求组队#</span>
                            <span class="pull-right item_num">10.4亿</span>
                        </div>
    
                        <div class="col-sm-12 item_hot" >
                            <span class="pull-left">#嵌入式大佬在哪#</span>
                            <span class="pull-right item_num">1.5亿</span>
                        </div>    
                        <div class="col-sm-12 item_hot" >
                            <span class="pull-left">#期末哭死#</span>
                            <span class="pull-right item_num">1.1亿</span>
                        </div>
                        <hr style="margin: 0;padding: 0;width: 100%">
                        <div class="col-sm-12 text-center" style="padding: 10px"><a href="#">查看更多</a></div>
                    </div>      -->
                </div>
            </div>
        </div>
</div>
    <script src="../src/js/app.js"></script>
    <script>
        $(function(){
            $("#content").keyup(function(){
        //判断输入的字符串长度
        var content_len = $("#content").text().replace(/\s/g,"").length;
        $(".tips").text("已经输入"+content_len+"个字");
        if(content_len==0){
            // alert(content);
            $(".tips").text("");
           $("#send").addClass("disabled");
            return false;
        }else{
            $("#send").removeClass("disabled");
        }
    });
       $(".pic").click(function(){
           $(".select_Img").click();  	
       })
   // 	function confirm(){
       
   // 		var r= new FileReader();
               // f=$(".select_Img").files[0];
               // r.readAsDataURL(f);
               // r.onload=function(e) {
               // 	$(".preview").src=this.result;

               // };
   // 	}
    
   //点击按钮发送内容
    $("#send").click(function(){

        // var myDate = new Date();

     //   var min = myDate.getMinutes();

     //   var time = min-(min-1);

     //   //alert(time);

        var content=$("#content").html();

        //判断选择的是否是图片格式		 
        var imgPath = $(".imgPath").text();
        var start  = imgPath.lastIndexOf(".");
        var postfix = imgPath.substring(start,imgPath.length).toUpperCase();
        if(imgPath!=""){

            if(postfix!=".PNG"&&postfix!=".JPG"&&postfix!=".GIF"&&postfix!=".JPEG"){
                    alert("图片格式需为png,gif,jpeg,jpg格式");
            }else{
                $(".item_msg").append("<div class='col-sm-12 col-xs-12 message' > <img src='../images/icon.png' class='col-sm-2 col-xs-2' style='border-radius: 50%'><div class='col-sm-10 col-xs-10'><span style='font-weight: bold;''>Jack.C</span> <br><small class='date' style='color:#999'>刚刚</small><div class='msg_content'>"+content+"<img class='mypic' onerror='this.src='../images/bg_1.jpg' src='file:///"+imgPath+"' ></div></div></div>");
            }
        }else{
            $(".item_msg").append("<div class='col-sm-12 col-xs-12 message' > <img src='../images/icon.png' class='col-sm-2 col-xs-2' style='border-radius: 50%'><div class='col-sm-10 col-xs-10'><span style='font-weight: bold;''>Month</span> <br><small class='date' style='color:#999'>刚刚</small><div class='msg_content'>"+content+"</div></div></div>");
        }                     
    });
     //添加表情包1
      for (var i = 1; i < 60; i++) {
           $(".emoji_1").append("<img src='../images/f"+i+".png' style='width:35px;height:35px' >");
       }
       //添加表情包2
       for (var i = 1; i < 61; i++) {
           $(".emoji_2").append("<img src='../images/h"+i+".png' style='width:35px;height:35px' >");
       }
    $(".emoji").click(function(){

        $(".myEmoji").show();

       //点击空白处隐藏弹出层
       $(document).click(function (e) {

           if (!$("#edit_form").is(e.target) && $("#edit_form").has(e.target).length === 0) {

               $(".myEmoji").hide();
           }
       });


    });

    //将表情添加到输入框
      $(".myEmoji img").each(function(){
              $(this).click(function(){
                  var url = $(this)[0].src;

               $('#content').append("<img src='"+url+"' style='width:25px;height:25px' >");

               $("#send").removeClass("disabled");
              })
      })
       
       //放大或缩小预览图片
       $(".mypic").click(function(){
           var oWidth=$(this).width(); //取得图片的实际宽度  
              var oHeight=$(this).height(); //取得图片的实际高度  
         
           if($(this).height()!=200){
               $(this).height(200); 
           }else{
               $(this).height(oHeight + 200/oWidth*oHeight); 
               
           }
                       
       });
        })
    </script>
</body>
</html>